<!DOCTYPE HTML>
<!--
	Dimension by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Fremd Chess</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />

		<link rel="apple-touch-icon" sizes="180x180" href="./images/fremdlogo_favicon/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="./images/fremdlogo_favicon/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="./images/fremdlogo_favicon/favicon-16x16.png">
		<link rel="manifest" href="./images/fremdlogo_favicon/site.webmanifest">
		<link rel="mask-icon" href="./images/fremdlogo_favicon/safari-pinned-tab.svg" color="#5bbad5">
		<meta name="msapplication-TileColor" content="#da532c">
		<meta name="theme-color" content="#ffffff">
		
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		<link rel="stylesheet"
			href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css"
			integrity="sha384-q94+BZtLrkL1/ohfjR8c6L+A6qzNH9R2hBLwyoAfu3i/WCvQjzL2RQJ3uNHDISdU"
			crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery-3.5.1.min.js"
			integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2"
			crossorigin="anonymous"></script>
		<script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"
			integrity="sha384-8Vi8VHwn3vjQ9eUHUxex3JSN/NFqUg3QbPyX8kWyb93+8AC/pPWTzj+nHtbC5bxD"
			crossorigin="anonymous"></script>
	
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<div class="logo">
							<span style="font-size: 80px;">&#9822;</span>
						</div>
						<div class="content">
							<div class="inner">
								<h1>Fremd Chess</h1>
								<p>Welcome to the Fremd Chess website<br /></p>
							</div>
						</div>
						<nav>
							<ul>
								<li><a href="#login" id="loginorigbutton">Login</a></li>
								<li><a href="#tactics" id="tacticsbutton">Tactics</a></li>
								<li><a href="#tournaments" id="tournamentsbutton">Log</a></li>
								<li><a href="#standings" id="standingsbutton">Standings</a></li>
								<!--<li><a href="#elements">Elements</a></li>-->
							</ul>
						</nav>
					</header>

				<!-- Main -->
					<div id="main">

						<!-- Login -->
						<article id="login">
							<h2 class="major">Login</h2>
							<form id="loginform" action ="javascript:void()">
								<div class="fields">
									<div class="field">
										<label for="email">Email</label>
										<input type="text" name="email" id="emaillog" />
									</div>
									<div class="field">
										<label for="password">Password</label>
										<input type="password" name="password" id="passwordlog" />
									</div>
								</div>
								<ul class="actions">
									<li><input type="submit" value="Login" class="primary" id="loginbutton"/></li>
								</ul>
								<div id="loginerror" style="color: red;"></div>
								<a href="#signup">Sign Up</a>
							</form>
						</article>

						<!-- Sign Up -->
						<article id="signup">
							<h2 class="major">Sign Up</h2>
							<form class="signupform" id="signupform" action="javascript:void()" >
								<div class="fields">
									<div class="half field">
										<label for="firstname">First Name</label>
										<input type="text" name="firstname" id="firstname" required />
									</div>
									<div class="half field">
										<label for="lastname">Last Name</label>
										<input type="text" name="lastname" id="lastname" required />
									</div>
									<div class="field">
										<label for="email">Email</label>
										<input type="text" name="email" id="email" required />
									</div>
									<div class="field">
										<label for="password">Password</label>
										<input type="password" name="password" id="password" required />
									</div>
									<div class="field">
										<label for="schoolid">School ID (No Zeros)</label>
										<input type="text" name="schoolid" id="schoolid" required />
									</div>
									<div class="field">
										<label for="lichessuser">Lichess Username</label>
										<input type="text" name="lichessuser" id="lichessuser" required />
									</div>
								</div>
								<ul class="actions">
									<li><input type="submit" value="Sign Up" id='signupbutton' class="primary"/></li>
								</ul>
								<!--<button class="primary" id="signupbutton">Sign Up</button>-->
								<a href="#login">Login</a>
							</form>
						</article>

						<!-- Work -->
							<article id="standings" style="width: 50rem;">
								<h2 class="major">Standings</h2>
								<div class="table-wrapper" id="standingsTableDiv">
									<table class="sortable">
										<thead>
											<tr>
												<th>Name</th>
												<th>Lichess Username</th>
												<th>Rapid Games</th>
												<th>Rapid Rating</th>
												<th>Puzzles Played</th>
												<th>Puzzles Rating</th>
												<th>Tournaments Played</th>
											</tr>
										</thead>
									</table>
								</div>
							</article>

						<!-- Tournament Log -->
							<article id="tournaments">
								<h2 class="major">Tournament Log</h2>
								<div class="table-wrapper" id="divTournamentTable">
									<table>
										<thead>
											<tr>
												<th>Date</th>
												<th>Name</th>
												<th>City</th>
											</tr>
										</thead>
									</table>
								</div>
								<button class="primary" id="addTournamentBtn">Add New Tournament</button>
								<!-- <span class="image main"><img src="images/pic03.jpg" alt="" /></span> -->
							</article>
						
						<!-- New Tournament -->
						<article id="newtournament">
							<h2 class="major">Add New Tournament</h2>
							<form class="signupform" id="signupform" action="javascript:void()" >
								<div class="fields">
									<div class="field">
										<label for="tournamentname">Tournament Name</label>
										<input type="text" name="tournamentname" id="tournamentname" required />
									</div>
									<div class="field">
										<label for="date">Date (MM/DD/YYYY)</label>
										<input type="text" name="date" id="date" required />
									</div>
									<div class="field">
										<label for="city">City</label>
										<input type="text" name="city" id="city" required />
									</div>
								</div>
								<ul class="actions">
									<li><input type="submit" value="Log Tournament" id='tournamentsubmitbutton' class="primary"/></li>
								</ul>
								<!--<button class="primary" id="signupbutton">Sign Up</button>-->
							</form>
							<!-- <span class="image main"><img src="images/pic03.jpg" alt="" /></span> -->
						</article>
							
						<!-- tactics -->
							<article id="tactics">
								<h2 class="major">Tactics</h2>
								<p>You can drag and drop pieces to find the solution and click the reset button to bring it back to the original position. <br> <br> When inputting your solutions, simply list the moves in order with spaces between each move but no spaces within a move. For example "e4 e5 Nf3+ Nf6 h1=Q" is valid. Make sure to use accurate chess notation, because otherwise, answers will not be accepted by the computer! <br><br> You are required to do seven tactics every week. New tactics will be posted every Sunday. Your total number of tactics is viewable on the "standings" page.</p>
								<!-- <span class="image main"><img src="images/pic03.jpg" alt="" /></span> -->
								<button class="primary" style='margin-right: 15px;' id='1btn' onclick="window.location.href = 'index.html#tactic1'">1</button>
								<button class="primary" style='margin-right: 15px;' id='2btn' onclick="window.location.href = 'index.html#tactic2'">2</button>
								<button class="primary" style='margin-right: 15px;' id='3btn' onclick="window.location.href = 'index.html#tactic3'">3</button>
								<button class="primary" style='margin-right: 15px;' id='4btn' onclick="window.location.href = 'index.html#tactic4'">4</button>
								<button class="primary" style='margin-right: 15px;' id='5btn' onclick="window.location.href = 'index.html#tactic5'">5</button>
								<button class="primary" style='margin-right: 15px;' id='6btn' onclick="window.location.href = 'index.html#tactic6'">6</button>
								<button class="primary" id='7btn' onclick="window.location.href = 'index.html#tactic7'">7</button>
							</article>

						<!-- tactic1 -->
							<article id="tactic1">
								<h2 class="major">Tactic 1</h2>
								<div id="myBoard1" style="width: 400px"></div>
								<!-- NEW TACTICS -->
								<p style="margin: 0;">Black to move - Solution requires next 5 moves</p>
								<input type="text" id="board1answer" style="margin-bottom: 25px; margin-top: 25px;">
								<button id="board1submit" class="primary" style="margin-right: 10px; letter-spacing: normal;">Check Answer</button>
								<button id="board1reset" onclick="resetBoard(1); return false;" class="primary" style="letter-spacing: normal;">Reset Board</button>
							</article>
							
						<!-- tactic2 -->
							<article id="tactic2">
								<h2 class="major">Tactic 2</h2>
								<div id="myBoard2" style="width: 400px"></div>
								<!-- NEW TACTICS -->
								<p style="margin: 0;">Black to move - Solution requires next 5 moves</p>
								<input type="text" id="board2answer" style="margin-bottom: 25px; margin-top: 25px;">
								<button id="board2submit" class="primary" style="margin-right: 10px; letter-spacing: normal;">Check Answer</button>
								<button id="board2reset" onclick="resetBoard(2); return false;" class="primary" style="letter-spacing: normal;">Reset Board</button>
							</article>

						<!-- tactic3 -->
							<article id="tactic3">
								<h2 class="major">Tactic 3</h2>
								<div id="myBoard3" style="width: 400px"></div>
								<!-- NEW TACTICS -->
								<p style="margin: 0;">Black to move - Solution requires next 5 moves</p>
								<input type="text" id="board3answer" style="margin-bottom: 25px; margin-top: 25px;">
								<button id="board3submit" class="primary" style="margin-right: 10px; letter-spacing: normal;">Check Answer</button>
								<button id="board3reset" onclick="resetBoard(3); return false;" class="primary" style="letter-spacing: normal;">Reset Board</button>
							</article>

						<!-- tactic4 -->
							<article id="tactic4">
								<h2 class="major">Tactic 4</h2>
								<div id="myBoard4" style="width: 400px"></div>
								<!-- NEW TACTICS -->
								<p style="margin: 0;">Black to move - Solution requires next 5 moves</p>
								<input type="text" id="board4answer" style="margin-bottom: 25px; margin-top: 25px;">
								<button id="board4submit" class="primary" style="margin-right: 10px; letter-spacing: normal;">Check Answer</button>
								<button id="board4reset" onclick="resetBoard(4); return false;" class="primary" style="letter-spacing: normal;">Reset Board</button>
							</article>

						<!-- tactic5 -->
							<article id="tactic5">
								<h2 class="major">Tactic 5</h2>
								<div id="myBoard5" style="width: 400px"></div>
								<!-- NEW TACTICS -->
								<p style="margin: 0;">Black to move - Solution requires next 5 moves</p>
								<input type="text" id="board5answer" style="margin-bottom: 25px; margin-top: 25px;">
								<button id="board5submit" class="primary" style="margin-right: 10px; letter-spacing: normal;">Check Answer</button>
								<button id="board5reset" onclick="resetBoard(5); return false;" class="primary" style="letter-spacing: normal;">Reset Board</button>
							</article>

						<!-- tactic6 -->
							<article id="tactic6">
								<h2 class="major">Tactic 6</h2>
								<div id="myBoard6" style="width: 400px"></div>
								<!-- NEW TACTICS -->
								<p style="margin: 0;">Black to move - Solution requires next 5 moves</p>
								<input type="text" id="board6answer" style="margin-bottom: 25px; margin-top: 25px;">
								<button id="board6submit" class="primary" style="margin-right: 10px; letter-spacing: normal;">Check Answer</button>
								<button id="board6reset" onclick="resetBoard(6); return false;" class="primary" style="letter-spacing: normal;">Reset Board</button>
							</article>

						<!-- tactic7 -->
							<article id="tactic7">
								<h2 class="major">Tactic 7</h2>
								<div id="myBoard7" style="width: 400px"></div>
								<!-- NEW TACTICS -->
								<p style="margin: 0;">Black to move - Solution requires next 5 moves</p>
								<input type="text" id="board7answer" style="margin-bottom: 25px; margin-top: 25px;">
								<button id="board7submit" class="primary" style="margin-right: 10px; letter-spacing: normal;">Check Answer</button>
								<button id="board7reset" onclick="resetBoard(7); return false;" class="primary" style="letter-spacing: normal;">Reset Board</button>
							</article>

						<!-- Contact -->
							<article id="contact">
								<h2 class="major">Contact</h2>
								<form method="post" action="#">
									<div class="fields">
										<div class="field half">
											<label for="name">Name</label>
											<input type="text" name="name" id="name" />
										</div>
										<div class="field half">
											<label for="email">Email</label>
											<input type="text" name="email" id="emailcontact" />
										</div>
										<div class="field">
											<label for="message">Message</label>
											<textarea name="message" id="message" rows="4"></textarea>
										</div>
									</div>
									<ul class="actions">
										<li><input type="submit" value="Send Message" class="primary" /></li>
										<li><input type="reset" value="Reset" /></li>
									</ul>
								</form>
								<ul class="icons">
									<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
									<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
									<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
									<li><a href="#" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
								</ul>
							</article>

						<!-- Elements -->
							<article id="elements">
								<h2 class="major">Elements</h2>

								<section>
									<h3 class="major">Text</h3>
									<p>This is <b>bold</b> and this is <strong>strong</strong>. This is <i>italic</i> and this is <em>emphasized</em>.
									This is <sup>superscript</sup> text and this is <sub>subscript</sub> text.
									This is <u>underlined</u> and this is code: <code>for (;;) { ... }</code>. Finally, <a href="#">this is a link</a>.</p>
									<hr />
									<h2>Heading Level 2</h2>
									<h3>Heading Level 3</h3>
									<h4>Heading Level 4</h4>
									<h5>Heading Level 5</h5>
									<h6>Heading Level 6</h6>
									<hr />
									<h4>Blockquote</h4>
									<blockquote>Fringilla nisl. Donec accumsan interdum nisi, quis tincidunt felis sagittis eget tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan faucibus. Vestibulum ante ipsum primis in faucibus lorem ipsum dolor sit amet nullam adipiscing eu felis.</blockquote>
									<h4>Preformatted</h4>
									<pre><code>i = 0;

while (!deck.isInOrder()) {
    print 'Iteration ' + i;
    deck.shuffle();
    i++;
}

print 'It took ' + i + ' iterations to sort the deck.';</code></pre>
								</section>

								<section>
									<h3 class="major">Lists</h3>

									<h4>Unordered</h4>
									<ul>
										<li>Dolor pulvinar etiam.</li>
										<li>Sagittis adipiscing.</li>
										<li>Felis enim feugiat.</li>
									</ul>

									<h4>Alternate</h4>
									<ul class="alt">
										<li>Dolor pulvinar etiam.</li>
										<li>Sagittis adipiscing.</li>
										<li>Felis enim feugiat.</li>
									</ul>

									<h4>Ordered</h4>
									<ol>
										<li>Dolor pulvinar etiam.</li>
										<li>Etiam vel felis viverra.</li>
										<li>Felis enim feugiat.</li>
										<li>Dolor pulvinar etiam.</li>
										<li>Etiam vel felis lorem.</li>
										<li>Felis enim et feugiat.</li>
									</ol>
									<h4>Icons</h4>
									<ul class="icons">
										<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
										<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
										<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
										<li><a href="#" class="icon brands fa-github"><span class="label">Github</span></a></li>
									</ul>

									<h4>Actions</h4>
									<ul class="actions">
										<li><a href="#" class="button primary">Default</a></li>
										<li><a href="#" class="button">Default</a></li>
									</ul>
									<ul class="actions stacked">
										<li><a href="#" class="button primary">Default</a></li>
										<li><a href="#" class="button">Default</a></li>
									</ul>
								</section>

								<section>
									<h3 class="major">Table</h3>
									<h4>Default</h4>
									<div class="table-wrapper">
										<table>
											<thead>
												<tr>
													<th>Name</th>
													<th>Description</th>
													<th>Price</th>
												</tr>
											</thead>
											<tbody>
												<tr>
													<td>Item One</td>
													<td>Ante turpis integer aliquet porttitor.</td>
													<td>29.99</td>
												</tr>
												<tr>
													<td>Item Two</td>
													<td>Vis ac commodo adipiscing arcu aliquet.</td>
													<td>19.99</td>
												</tr>
												<tr>
													<td>Item Three</td>
													<td> Morbi faucibus arcu accumsan lorem.</td>
													<td>29.99</td>
												</tr>
												<tr>
													<td>Item Four</td>
													<td>Vitae integer tempus condimentum.</td>
													<td>19.99</td>
												</tr>
												<tr>
													<td>Item Five</td>
													<td>Ante turpis integer aliquet porttitor.</td>
													<td>29.99</td>
												</tr>
											</tbody>
											<tfoot>
												<tr>
													<td colspan="2"></td>
													<td>100.00</td>
												</tr>
											</tfoot>
										</table>
									</div>

									<h4>Alternate</h4>
									<div class="table-wrapper">
										<table class="alt">
											<thead>
												<tr>
													<th>Name</th>
													<th>Description</th>
													<th>Price</th>
												</tr>
											</thead>
											<tbody>
												<tr>
													<td>Item One</td>
													<td>Ante turpis integer aliquet porttitor.</td>
													<td>29.99</td>
												</tr>
												<tr>
													<td>Item Two</td>
													<td>Vis ac commodo adipiscing arcu aliquet.</td>
													<td>19.99</td>
												</tr>
												<tr>
													<td>Item Three</td>
													<td> Morbi faucibus arcu accumsan lorem.</td>
													<td>29.99</td>
												</tr>
												<tr>
													<td>Item Four</td>
													<td>Vitae integer tempus condimentum.</td>
													<td>19.99</td>
												</tr>
												<tr>
													<td>Item Five</td>
													<td>Ante turpis integer aliquet porttitor.</td>
													<td>29.99</td>
												</tr>
											</tbody>
											<tfoot>
												<tr>
													<td colspan="2"></td>
													<td>100.00</td>
												</tr>
											</tfoot>
										</table>
									</div>
								</section>

								<section>
									<h3 class="major">Buttons</h3>
									<ul class="actions">
										<li><a href="#" class="button primary">Primary</a></li>
										<li><a href="#" class="button">Default</a></li>
									</ul>
									<ul class="actions">
										<li><a href="#" class="button">Default</a></li>
										<li><a href="#" class="button small">Small</a></li>
									</ul>
									<ul class="actions">
										<li><a href="#" class="button primary icon solid fa-download">Icon</a></li>
										<li><a href="#" class="button icon solid fa-download">Icon</a></li>
									</ul>
									<ul class="actions">
										<li><span class="button primary disabled">Disabled</span></li>
										<li><span class="button disabled">Disabled</span></li>
									</ul>
								</section>

								<section>
									<h3 class="major">Form</h3>
									<form method="post" action="#">
										<div class="fields">
											<div class="field half">
												<label for="demo-name">Name</label>
												<input type="text" name="demo-name" id="demo-name" value="" placeholder="Jane Doe" />
											</div>
											<div class="field half">
												<label for="demo-email">Email</label>
												<input type="email" name="demo-email" id="demo-email" value="" placeholder="jane@untitled.tld" />
											</div>
											<div class="field">
												<label for="demo-category">Category</label>
												<select name="demo-category" id="demo-category">
													<option value="">-</option>
													<option value="1">Manufacturing</option>
													<option value="1">Shipping</option>
													<option value="1">Administration</option>
													<option value="1">Human Resources</option>
												</select>
											</div>
											<div class="field half">
												<input type="radio" id="demo-priority-low" name="demo-priority" checked>
												<label for="demo-priority-low">Low</label>
											</div>
											<div class="field half">
												<input type="radio" id="demo-priority-high" name="demo-priority">
												<label for="demo-priority-high">High</label>
											</div>
											<div class="field half">
												<input type="checkbox" id="demo-copy" name="demo-copy">
												<label for="demo-copy">Email me a copy</label>
											</div>
											<div class="field half">
												<input type="checkbox" id="demo-human" name="demo-human" checked>
												<label for="demo-human">Not a robot</label>
											</div>
											<div class="field">
												<label for="demo-message">Message</label>
												<textarea name="demo-message" id="demo-message" placeholder="Enter your message" rows="6"></textarea>
											</div>
										</div>
										<ul class="actions">
											<li><input type="submit" value="Send Message" class="primary" /></li>
											<li><input type="reset" value="Reset" /></li>
										</ul>
									</form>
								</section>

							</article>

					</div>

				<!-- Footer -->
					<footer id="footer">
						<p class="copyright">&copy; Fremd Chess 2024. Design: <a href="https://html5up.net">HTML5 UP</a>.</p>
					</footer>

			</div>

		<!-- BG -->
			<div id="bg"></div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			<script src="./assets/js/sorttable.js"></script>
			<script type="module">
				// Import the functions you need from the SDKs you need
				import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js";
				import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-analytics.js";
				import { getDatabase, ref, set, onValue, update, push } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-database.js";
	
				// TODO: Add SDKs for Firebase products that you want to use
				// https://firebase.google.com/docs/web/setup#available-libraries
			  
				// Your web app's Firebase configuration
				// For Firebase JS SDK v7.20.0 and later, measurementId is optional
				const firebaseConfig = {
				  apiKey: "AIzaSyC31iOy136zpCYiL1C6xBocTBfP4eudobQ",
				  authDomain: "fremdchess-f7f23.firebaseapp.com",
				  projectId: "fremdchess-f7f23",
				  storageBucket: "fremdchess-f7f23.appspot.com",
				  messagingSenderId: "22454485707",
				  appId: "1:22454485707:web:42b3e1d322a344f4bcd14e",
				  measurementId: "G-MTD0NC3G9W",
				  databaseURL: "https://fremdchess-f7f23-default-rtdb.firebaseio.com"
				};
			  
				// Initialize Firebase
				const app = initializeApp(firebaseConfig);
				const analytics = getAnalytics(app);
				const db = getDatabase(app);

				function writeData(firstname, lastname, email, password, schoolid, lichessuser, tactics, schoolrating, numtournaments, origRapid, origPuzzles) {
					set(ref(db, "users/" + email.split('@')[0]), {
						firstname: firstname,
						lastname: lastname,
						email: email,
						password: password,
						schoolid: schoolid,
						lichessuser: lichessuser,
						tactics: tactics,
						schoolrating: schoolrating,
						numtournaments: numtournaments,
						origRapid: origRapid,
						origPuzzles: origPuzzles
					});
				}
				
				let currUserData = {};
				function fetchUserData() {
					onValue(ref(db, 'users/' + sessionStorage.getItem('chesslogin')), (snapshot) => {
						currUserData = snapshot.val()
					});
				}
				fetchUserData()

				document.getElementById("signupbutton").addEventListener("click", function() {
					let firstname1 = document.getElementById('firstname').value
					let lastname1 = document.getElementById('lastname').value;
					let email1 = document.getElementById('email').value;
					let password1 = document.getElementById('password').value;
					let schoolid1 = document.getElementById('schoolid').value;
					let lichessuser1 = document.getElementById('lichessuser').value;

					fetch('https://lichess.org/api/user/' + lichessuser1)
						.then(response => {
							if (!response.ok) {
							throw new Error('Network response was not ok');
							}
							return response.json();
						})
						.then(data => {
							writeData(firstname1, lastname1, email1, password1, schoolid1, lichessuser1, 0, 0, 0, data['perfs']['rapid']['games'], data['perfs']['puzzle']['games']);
						})
						.catch(error => {
							console.error('There was a problem with the fetch operation:', error);
						});
					
					sessionStorage.setItem("chesslogin", email1.split("@")[0]);

					setTimeout(function (){
						fetchUserData();
						window.location.href = 'index.html';								
					}, 3000);
				});

				document.getElementById("tournamentsubmitbutton").addEventListener("click", function() {
					let tournamentname = document.getElementById('tournamentname').value
					let date = document.getElementById('date').value;
					let city = document.getElementById('city').value;

					const updates = {};
					updates['/users/' + sessionStorage.getItem('chesslogin') + '/tournaments/' + date.split("/")[2] + date.split('/')[0] + date.split('/')[1] + tournamentname.split(' ')[0]] = {'tournamentname': tournamentname, 'date': date, 'city': city};
					update(ref(db), updates);
					updates['/users/' + sessionStorage.getItem('chesslogin') + '/numtournaments/'] = currUserData['numtournaments'] + 1
					update(ref(db), updates);

					fetchUserData();

					setTimeout(function (){
						window.location.href = 'index.html#tournaments';								
					}, 3000);
				});

				document.getElementById("loginbutton").addEventListener("click", function() {
					let email1 = document.getElementById('emaillog').value;
					let password1 = document.getElementById('passwordlog').value;
					console.log('password: ' + password1)
					let pass = "placeholder"

					onValue(ref(db, 'users/' + email1.split('@')[0] + '/password'), (snapshot) => {
						pass = snapshot.val()
						if (password1 == pass) {
							sessionStorage.setItem("chesslogin", email1.split("@")[0]);
							fetchUserData()
							setTimeout(function (){
								window.location.href = 'index.html';								
							}, 3000);
						} else {
							document.getElementById('loginerror').innerText = "Wrong Username or Password"
						}
					});
				});

				//NEW TACTICS
				let answers = ['e4 e5', 'Nf3 Nc6', 'Bc5 Bc4', "Qh8, Qh8", "Kh1 Kh8", "Rh1, Rh8", "a4, h4"]

				document.getElementById("board1submit").addEventListener("click", function() {
					if (document.getElementById('board1answer').value == answers[0]) {
						const updates = {};
						updates['/users/' + sessionStorage.getItem('chesslogin') + '/tactics'] = currUserData['tactics'] + 1;
						update(ref(db), updates);
						updates['/users/' + sessionStorage.getItem('chesslogin') + '/tactic1'] = answers[0];
						update(ref(db), updates);

						document.getElementById('board1answer').style.backgroundColor = "green"
						document.getElementById('board1answer').readOnly = true;
						document.getElementById('board1submit').classList.add('disabled')
					} else {
						document.getElementById('board1answer').style.backgroundColor = "red"
						setTimeout(function (){
							document.getElementById('board1answer').style.backgroundColor = "rgba(0, 0, 0, 0)"								
						}, 3000);
					} 
				});

				document.getElementById("board2submit").addEventListener("click", function() {
					if (document.getElementById('board2answer').value == answers[1]) {
						const updates = {};
						updates['/users/' + sessionStorage.getItem('chesslogin') + '/tactics'] = currUserData['tactics'] + 1;
						update(ref(db), updates);
						updates['/users/' + sessionStorage.getItem('chesslogin') + '/tactic2'] = answers[1];
						update(ref(db), updates);

						document.getElementById('board2answer').style.backgroundColor = "green"
						document.getElementById('board2answer').readOnly = true;
						document.getElementById('board2submit').classList.add('disabled')

						fetchUserData()
					} else {
						document.getElementById('board2answer').style.backgroundColor = "red"
						setTimeout(function (){
							document.getElementById('board2answer').style.backgroundColor = "rgba(0, 0, 0, 0)"								
						}, 3000);
					} 
				});

				document.getElementById("board3submit").addEventListener("click", function() {
					if (document.getElementById('board3answer').value == answers[2]) {
						const updates = {};
						updates['/users/' + sessionStorage.getItem('chesslogin') + '/tactics'] = currUserData['tactics'] + 1;
						update(ref(db), updates);
						updates['/users/' + sessionStorage.getItem('chesslogin') + '/tactic3'] = answers[2];
						update(ref(db), updates);

						document.getElementById('board3answer').style.backgroundColor = "green"
						document.getElementById('board3answer').readOnly = true;
						document.getElementById('board3submit').classList.add('disabled')

						fetchUserData()
					} else {
						document.getElementById('board3answer').style.backgroundColor = "red"
						setTimeout(function (){
							document.getElementById('board3answer').style.backgroundColor = "rgba(0, 0, 0, 0)"								
						}, 3000);
					} 
				});

				document.getElementById("board4submit").addEventListener("click", function() {
					if (document.getElementById('board4answer').value == answers[3]) {
						const updates = {};
						updates['/users/' + sessionStorage.getItem('chesslogin') + '/tactics'] = currUserData['tactics'] + 1;
						update(ref(db), updates);
						updates['/users/' + sessionStorage.getItem('chesslogin') + '/tactic4'] = answers[3];
						update(ref(db), updates);

						document.getElementById('board4answer').style.backgroundColor = "green"
						document.getElementById('board4answer').readOnly = true;
						document.getElementById('board4submit').classList.add('disabled')

						fetchUserData()
					} else {
						document.getElementById('board4answer').style.backgroundColor = "red"
						setTimeout(function (){
							document.getElementById('board4answer').style.backgroundColor = "rgba(0, 0, 0, 0)"								
						}, 3000);
					} 
				});

				document.getElementById("board5submit").addEventListener("click", function() {
					if (document.getElementById('board5answer').value == answers[4]) {
						const updates = {};
						updates['/users/' + sessionStorage.getItem('chesslogin') + '/tactics'] = currUserData['tactics'] + 1;
						update(ref(db), updates);
						updates['/users/' + sessionStorage.getItem('chesslogin') + '/tactic5'] = answers[4];
						update(ref(db), updates);

						document.getElementById('board5answer').style.backgroundColor = "green"
						document.getElementById('board5answer').readOnly = true;
						document.getElementById('board5submit').classList.add('disabled')
						
						fetchUserData()
					} else {
						document.getElementById('board5answer').style.backgroundColor = "red"
						setTimeout(function (){
							document.getElementById('board5answer').style.backgroundColor = "rgba(0, 0, 0, 0)"								
						}, 3000);
					} 
				});

				document.getElementById("board6submit").addEventListener("click", function() {
					if (document.getElementById('board6answer').value == answers[5]) {
						const updates = {};
						updates['/users/' + sessionStorage.getItem('chesslogin') + '/tactics'] = currUserData['tactics'] + 1;
						update(ref(db), updates);
						updates['/users/' + sessionStorage.getItem('chesslogin') + '/tactic6'] = answers[5];
						update(ref(db), updates);

						document.getElementById('board6answer').style.backgroundColor = "green"
						document.getElementById('board6answer').readOnly = true;
						document.getElementById('board6submit').classList.add('disabled')

						fetchUserData()
					} else {
						document.getElementById('board6answer').style.backgroundColor = "red"
						setTimeout(function (){
							document.getElementById('board6answer').style.backgroundColor = "rgba(0, 0, 0, 0)"								
						}, 3000);
					} 
				});

				document.getElementById("board7submit").addEventListener("click", function() {
					if (document.getElementById('board7answer').value == answers[6]) {
						const updates = {};
						updates['/users/' + sessionStorage.getItem('chesslogin') + '/tactics'] = currUserData['tactics'] + 1;
						update(ref(db), updates);
						updates['/users/' + sessionStorage.getItem('chesslogin') + '/tactic7'] = answers[6];
						update(ref(db), updates);

						document.getElementById('board7answer').style.backgroundColor = "green"
						document.getElementById('board7answer').readOnly = true;
						document.getElementById('board7submit').classList.add('disabled')

						fetchUserData()
					} else {
						document.getElementById('board7answer').style.backgroundColor = "red"
						setTimeout(function (){
							document.getElementById('board7answer').style.backgroundColor = "rgba(0, 0, 0, 0)"								
						}, 3000);
					} 
				});

				function handleHashChange() {
					if (window.location.hash === '#tactics') {
						if (currUserData['tactic1'] != null){
							document.getElementById('1btn').style.backgroundColor = 'green'
						}
						if (currUserData['tactic2'] != null){
							document.getElementById('2btn').style.backgroundColor = 'green'
						}
						if (currUserData['tactic3'] != null){
							document.getElementById('3btn').style.backgroundColor = 'green'
						}
						if (currUserData['tactic4'] != null){
							document.getElementById('4btn').style.backgroundColor = 'green'
						}
						if (currUserData['tactic5'] != null){
							document.getElementById('5btn').style.backgroundColor = 'green'
						}
						if (currUserData['tactic6'] != null){
							document.getElementById('6btn').style.backgroundColor = 'green'
						}
						if (currUserData['tactic7'] != null){
							document.getElementById('7btn').style.backgroundColor = 'green'
						}
					}
					else if (window.location.hash === '#tactic1') {
						if (currUserData['tactic1'] != null){
							document.getElementById('board1answer').value = answers[0]
							document.getElementById('board1answer').style.backgroundColor = "green"
							document.getElementById('board1answer').readOnly = true;
							document.getElementById('board1submit').classList.add('disabled')
						}
					}
					else if (window.location.hash === '#tactic2') {
						if (currUserData['tactic2'] != null){
							document.getElementById('board2answer').value = answers[1]
							document.getElementById('board2answer').style.backgroundColor = "green"
							document.getElementById('board2answer').readOnly = true;
							document.getElementById('board2submit').classList.add('disabled')
						}
					}
					else if (window.location.hash === '#tactic3') {
						if (currUserData['tactic3'] != null){
							document.getElementById('board3answer').value = answers[2]
							document.getElementById('board3answer').style.backgroundColor = "green"
							document.getElementById('board3answer').readOnly = true;
							document.getElementById('board3submit').classList.add('disabled')
						}
					}
					else if (window.location.hash === '#tactic4') {
						if (currUserData['tactic4'] != null){
							document.getElementById('board4answer').value = answers[3]
							document.getElementById('board4answer').style.backgroundColor = "green"
							document.getElementById('board4answer').readOnly = true;
							document.getElementById('board4submit').classList.add('disabled')
						}
					}
					else if (window.location.hash === '#tactic5') {
						if (currUserData['tactic5'] != null){
							document.getElementById('board5answer').value = answers[4]
							document.getElementById('board5answer').style.backgroundColor = "green"
							document.getElementById('board5answer').readOnly = true;
							document.getElementById('board5submit').classList.add('disabled')
						}
					}
					else if (window.location.hash === '#tactic6') {
						if (currUserData['tactic6'] != null){
							document.getElementById('board6answer').value = answers[5]
							document.getElementById('board6answer').style.backgroundColor = "green"
							document.getElementById('board6answer').readOnly = true;
							document.getElementById('board6submit').classList.add('disabled')
						}
					}
					else if (window.location.hash === '#tactic7') {
						if (currUserData['tactic7'] != null){
							document.getElementById('board7answer').value = answers[6]
							document.getElementById('board7answer').style.backgroundColor = "green"
							document.getElementById('board7answer').readOnly = true;
							document.getElementById('board7submit').classList.add('disabled')
						}
					}
					else if (window.location.hash === '#tournaments') {
						let output = ''
						let tournamentIds = Object.keys(currUserData['tournaments'])
						for (let i = 0; i < tournamentIds.length; i++){
							output += '<tr><td>' + currUserData['tournaments'][tournamentIds[i]]['tournamentname'] + "</td><td>" + currUserData['tournaments'][tournamentIds[i]]['date'] + "</td><td>" + currUserData['tournaments'][tournamentIds[i]]['city'] + '</td></tr>'
						}
						document.getElementById('divTournamentTable').innerHTML = "<table><thead><tr><th>Name</th><th>Date</th><th>City</th></tr></thead><tbody>" + output + "</tbody></table>"
					}
					else if (window.location.hash === '#standings') {
						let output = ''

						onValue(ref(db, 'users'), (snapshot) => {
							let allUsers = snapshot.val()
							let usernames = Object.keys(allUsers)
							for (let i = 0; i < usernames.length; i++){
								let lichessusername = allUsers[usernames[i]]['lichessuser'];
								let lichessdata = {};
								fetch('https://lichess.org/api/user/' + lichessusername)
									.then(response => {
										if (!response.ok) {
										throw new Error('Network response was not ok');
										}
										return response.json();
									})
									.then(data => {
										output += '<tr><td>' + allUsers[usernames[i]]['firstname'] + " " + allUsers[usernames[i]]['lastname'] + "</td><td>" + lichessusername + "</td><td>" + (data['perfs']['rapid']['games'] - allUsers[usernames[i]]['origRapid']) + "</td><td>" + data['perfs']['rapid']['rating'] + "</td><td>" + (data['perfs']['puzzle']['games'] - allUsers[usernames[i]]['origPuzzles']) + "</td><td>" + data['perfs']['puzzle']['rating'] + "</td><td>" + allUsers[usernames[i]]['tactics'] + "</td><td>" + allUsers[usernames[i]]['numtournaments'] + '</td></tr>';
									})
									.catch(error => {
										console.error('There was a problem with the fetch operation:', error);
									});
								//output += '<tr><td>' + allUsers[usernames[i]][tournamentIds[i]]['lichessuser'] + "</td><td>" + currUserData['tournaments'][tournamentIds[i]]['date'] + "</td><td>" + currUserData['tournaments'][tournamentIds[i]]['city'] + '</td></tr>'
							}
							setTimeout(function (){
								document.getElementById('standingsTableDiv').innerHTML = "<table class='sortable'><thead><tr><th>Name</th><th>Lichess Username</th><th>Rapid Games</th><th>Rapid Rating</th><th>Puzzles Played</th><th>Puzzles Rating</th><th>Tactics Solved</th><th>Tournaments Played</th></tr></thead><tbody>" + output + "</tbody></table>"
							}, 1000);
						});
					}
				}

				setTimeout(function (){
					handleHashChange();								
				}, 1000);

				window.addEventListener('hashchange', handleHashChange);
			</script>



			<script>
				document.getElementById("addTournamentBtn").addEventListener("click", function() {
					window.location.href = 'index.html#newtournament'
				});

				//NEW TACTICS
				FENs = ['rnbqkbnr/pppp3p/8/4p3/5p2/6p1/PPPPPPPP/RNBQKBNR w KQkq - 0 1', 'rnbqkbnr/pppp3p/8/4p3/5p2/6p1/PPPPPPPP/RNBQKBNR w KQkq - 0 1', 'rnbqkbnr/pppp3p/8/4p3/5p2/6p1/PPPPPPPP/RNBQKBNR w KQkq - 0 1', 'rnbqkbnr/pppp3p/8/4p3/5p2/6p1/PPPPPPPP/RNBQKBNR w KQkq - 0 1', 'rnbqkbnr/pppp3p/8/4p3/5p2/6p1/PPPPPPPP/RNBQKBNR w KQkq - 0 1', 'rnbqkbnr/pppp3p/8/4p3/5p2/6p1/PPPPPPPP/RNBQKBNR w KQkq - 0 1', 'rnbqkbnr/pppp3p/8/4p3/5p2/6p1/PPPPPPPP/RNBQKBNR w KQkq - 0 1']
				orients = ['black', 'white', 'white', 'black',  'white', 'black', 'black']

				if (sessionStorage.getItem('chesslogin') != null) {
					document.getElementById('loginorigbutton').classList.add('disabled');
				} else {
					document.getElementById('tournamentsbutton').classList.add('disabled');
					document.getElementById('tacticsbutton').classList.add('disabled');
				}

				var cfg1 = {
					pieceTheme: 'https://koblenski.github.io/javascript/chessboardjs-0.3.0/img/chesspieces/wikipedia/{piece}.png',
					draggable: true,
					position: FENs[0],
					orientation: orients[0]
				};
				var board1 = Chessboard('myBoard1', cfg1)

				var cfg2 = {
					pieceTheme: 'https://koblenski.github.io/javascript/chessboardjs-0.3.0/img/chesspieces/wikipedia/{piece}.png',
					draggable: true,
					position: FENs[1],
					orientation: orients[1]
				};
				var board2 = Chessboard('myBoard2', cfg2)

				var cfg3 = {
					pieceTheme: 'https://koblenski.github.io/javascript/chessboardjs-0.3.0/img/chesspieces/wikipedia/{piece}.png',
					draggable: true,
					position: FENs[2],
					orientation: orients[2]
				};
				var board3 = Chessboard('myBoard3', cfg3)

				var cfg4 = {
					pieceTheme: 'https://koblenski.github.io/javascript/chessboardjs-0.3.0/img/chesspieces/wikipedia/{piece}.png',
					draggable: true,
					position: FENs[3],
					orientation: orients[3]
				};
				var board4 = Chessboard('myBoard4', cfg4)

				var cfg5 = {
					pieceTheme: 'https://koblenski.github.io/javascript/chessboardjs-0.3.0/img/chesspieces/wikipedia/{piece}.png',
					draggable: true,
					position: FENs[4],
					orientation: orients[4]
				};
				var board5 = Chessboard('myBoard5', cfg5)

				var cfg6 = {
					pieceTheme: 'https://koblenski.github.io/javascript/chessboardjs-0.3.0/img/chesspieces/wikipedia/{piece}.png',
					draggable: true,
					position: FENs[5],
					orientation: orients[5]
				};
				var board6 = Chessboard('myBoard6', cfg6)

				var cfg7 = {
					pieceTheme: 'https://koblenski.github.io/javascript/chessboardjs-0.3.0/img/chesspieces/wikipedia/{piece}.png',
					draggable: true,
					position: FENs[6],
					orientation: orients[6]
				};
				var board7 = Chessboard('myBoard7', cfg7)

				function resetBoard(num) {
					if (num == 1) {
						var board1 = Chessboard('myBoard1', cfg1)
					}
					else if (num == 2) {
						var board1 = Chessboard('myBoard2', cfg2)
					}
					else if (num == 3) {
						var board1 = Chessboard('myBoard3', cfg3)
					}
					else if (num == 4) {
						var board1 = Chessboard('myBoard4', cfg4)
					}
					else if (num == 5) {
						var board1 = Chessboard('myBoard5', cfg5)
					}
					else if (num == 6) {
						var board1 = Chessboard('myBoard6', cfg6)
					}
					else if (num == 7) {
						var board1 = Chessboard('myBoard7', cfg7)
					}
				}

			</script>
	</body>
</html>
